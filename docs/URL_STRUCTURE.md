# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL –∏ –¥–æ–º–µ–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –ú–µ—Ç–∞—Ç—ç–∫—Å

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏ —Ç—Ä–µ–±—É–µ–º—ã–º URL-–∞–¥—Ä–µ—Å–∞–º –∏ –¥–æ–º–µ–Ω–∞–º.

---

## üìã –¢–µ–∫—É—â–∏–µ –¥–æ–º–µ–Ω—ã

### Production –¥–æ–º–µ–Ω—ã (–∏–∑ .env.docker)

```
‚úì metateks.vlch.dev              # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç
‚úì metateks-admin.vinodesign.ru   # –ê–¥–º–∏–Ω–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –¥–æ–º–µ–Ω)
‚úì localhost                      # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚úì 127.0.0.1                      # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–º–µ–Ω–æ–≤

```
üîπ www.metateks.ru              # –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
üîπ admin.metateks.ru            # –ê–¥–º–∏–Ω–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
üîπ api.metateks.ru              # API endpoints (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## üåê –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ URL (Frontend)

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```
/                               ‚úì –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞
```

### –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
```
/catalog/                       ‚úì –ì–ª–∞–≤–Ω–∞—è –∫–∞—Ç–∞–ª–æ–≥–∞
/catalog/p/<id>/                ‚úì –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä –ø–æ ID
/catalog/<category>/            ‚úì –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
/catalog/<category>/<subcategory>/           ‚úì –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è
/catalog/<category>/<subcategory>/filter/    ‚úì –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
/catalog/<category>/<subcategory>/model<id>/ ‚úì –§–∏–ª—å—Ç—Ä –ø–æ –º–æ–¥–µ–ª–∏ —Ç–µ—Ö–Ω–∏–∫–∏
/catalog/<category>/<subcategory>/<brand>/   ‚úì –§–∏–ª—å—Ç—Ä –ø–æ –±—Ä–µ–Ω–¥—É
/catalog/<category>/<subcategory>/<product>-<id>/ ‚úì –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `/catalog/zapchasti/` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ó–∞–ø—á–∞—Å—Ç–∏"
- `/catalog/zapchasti/filtry/` - –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è "–§–∏–ª—å—Ç—Ä—ã"
- `/catalog/zapchasti/filtry/model123/` - —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –º–æ–¥–µ–ª–∏ 123
- `/catalog/zapchasti/filtry/maslyanyj-filtr-12345/` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä

### –ë—Ä–µ–Ω–¥—ã
```
/brands/                        ‚úì –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—Ä–µ–Ω–¥–æ–≤
/brands/<brand>/                ‚úì –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–µ–Ω–¥–∞
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `/brands/xcmg/` - –±—Ä–µ–Ω–¥ XCMG
- `/brands/sdlg/` - –±—Ä–µ–Ω–¥ SDLG

### –û –∫–æ–º–ø–∞–Ω–∏–∏
```
/about/                         ‚úì –û –∫–æ–º–ø–∞–Ω–∏–∏ (–≥–ª–∞–≤–Ω–∞—è)
/about/video/                   ‚úì –í–∏–¥–µ–æ
/about/video/<tag>/             ‚úì –í–∏–¥–µ–æ –ø–æ —Ç–µ–≥—É
/about/photo/                   ‚úì –§–æ—Ç–æ
/about/photo/<tag>/             ‚úì –§–æ—Ç–æ –ø–æ —Ç–µ–≥—É
/about/files/                   ‚úì –§–∞–π–ª—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
/about/files/<tag>/             ‚úì –§–∞–π–ª—ã –ø–æ —Ç–µ–≥—É
```

### –ù–æ–≤–æ—Å—Ç–∏
```
/news/                          ‚úì –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
/news/<year>/                   ‚úì –ù–æ–≤–æ—Å—Ç–∏ –∑–∞ –≥–æ–¥
/news/<category>/               ‚úì –ù–æ–≤–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
/news/<year>/<category>/        ‚úì –ù–æ–≤–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –≥–æ–¥
/news/<date>/<slug>/            ‚úì –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `/news/2024/` - –Ω–æ–≤–æ—Å—Ç–∏ 2024
- `/news/company/` - –Ω–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- `/news/2024-12-25/novyj-sklad/` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å

### –°—Ç–∞—Ç—å–∏
```
/articles/                      ‚úì –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
/articles/<slug>/               ‚úì –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç–∞—Ç—å—è
```

### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
```
/account/                       ‚úì –ì–ª–∞–≤–Ω–∞—è –õ–ö
/account/orders/                ‚úì –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
/account/addresses/             ‚úì –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
/account/favorites/             ‚úì –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
/account/profile/               ‚úì –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/account/logout/                ‚úì –í—ã—Ö–æ–¥ (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ API)
```

### –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã
```
/cart/                          ‚úì –ö–æ—Ä–∑–∏–Ω–∞
/promotions/                    ‚úì –ê–∫—Ü–∏–∏ –∏ —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
```

### –ü–æ–∏—Å–∫
```
/search/                        ‚úì –ü–æ–∏—Å–∫ –ø–æ —Å–∞–π—Ç—É
  ?q=<–∑–∞–ø—Ä–æ—Å>                   ‚úì –ü–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (CMS)
```
/<slug>/                        ‚úì –õ—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑ CMS
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `/dostavka/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- `/garantiya/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–∞—Ä–∞–Ω—Ç–∏–∏
- `/kontakty/` - –∫–æ–Ω—Ç–∞–∫—Ç—ã

---

## üîå API Endpoints

### –ü—Ä–µ—Ñ–∏–∫—Å: `/api/`

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth/`)
```
POST   /api/auth/login/         ‚úì –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/auth/logout/        ‚úì –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/auth/register/      ‚úì –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST   /api/auth/password-reset/ ‚úì –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
```

#### –ö–æ—Ä–∑–∏–Ω–∞ (`/api/cart/`)
```
GET    /api/cart/               ‚úì –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
POST   /api/cart/add/           ‚úì –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
POST   /api/cart/update/        ‚úì –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
POST   /api/cart/remove/        ‚úì –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
POST   /api/cart/clear/         ‚úì –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
```

#### –ó–∞–∫–∞–∑—ã (`/api/order/`)
```
POST   /api/order/create/       ‚úì –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
GET    /api/order/<id>/         ‚úì –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑
POST   /api/order/<id>/cancel/  ‚úì –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
```

#### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (`/api/account/`)
```
GET    /api/account/profile/    ‚úì –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
POST   /api/account/profile/    ‚úì –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
POST   /api/account/password/   ‚úì –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
```

#### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (`/api/favorites/`)
```
GET    /api/favorites/          ‚úì –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
POST   /api/favorites/add/      ‚úì –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
POST   /api/favorites/remove/   ‚úì –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
```

#### –ê–¥—Ä–µ—Å–∞ (`/api/addresses/`)
```
GET    /api/addresses/cities/   ‚úì –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
GET    /api/addresses/warehouses/ ‚úì –°–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
POST   /api/addresses/detect/   ‚úì –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –ø–æ IP (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
```

---

## üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ URL

### Django Admin
```
/admin/                         ‚úì –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django
/admin/login/                   ‚úì –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É
/admin/<app>/<model>/           ‚úì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–° (CommerceML)
```
/cml/                           ‚úì –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
/cml/1c_exchange.php            ‚úì –û–±–º–µ–Ω —Å 1–° (mode=checkauth,init,file,import)
  ?type=catalog                 ‚úì –¢–∏–ø –æ–±–º–µ–Ω–∞: catalog –∏–ª–∏ sale
  ?mode=checkauth               ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  ?mode=init                    ‚úì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  ?mode=file                    ‚úì –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
  ?mode=import                  ‚úì –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```

**–í–∞–∂–Ω–æ:** –î–ª—è —Ä–∞–±–æ—Ç—ã 1–° —Ç—Ä–µ–±—É–µ—Ç—Å—è Basic Auth —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏.

### –°–ª—É–∂–µ–±–Ω—ã–µ URL
```
/images-handler/                ‚úì Django-galleryfield (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
/tinymce/                       ‚úì TinyMCE WYSIWYG —Ä–µ–¥–∞–∫—Ç–æ—Ä
/health/                        ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è healthcheck)
```

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. Health Check Endpoint
```
GET /health/                    ‚ùå Endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è:**
- Docker healthcheck
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, etc.)
- Load balancer health checks

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# –í main/urls.py –¥–æ–±–∞–≤–∏—Ç—å:
from django.http import JsonResponse

def health_check(request):
    return JsonResponse({"status": "ok"}, status=200)

# –í urlpatterns:
path('health/', health_check, name='health'),
```

### 2. Sitemap.xml
```
GET /sitemap.xml                ‚ùå –ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤
```

### 3. Robots.txt
```
GET /robots.txt                 ‚ùå –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ä–æ–±–æ—Ç–æ–≤
```

### 4. Favicon
```
GET /favicon.ico                ‚ö†Ô∏è  –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ
```

### 5. API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
GET /api/docs/                  ‚ùå Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
GET /api/schema/                ‚ùå OpenAPI —Å—Ö–µ–º–∞
```

### 6. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É
```
POST /api/newsletter/subscribe/ ‚ùå –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏
POST /api/newsletter/unsubscribe/ ‚ùå –û—Ç–ø–∏—Å–∫–∞
```

### 7. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
```
POST /api/feedback/             ‚ö†Ô∏è  –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ
POST /api/callback/             ‚ö†Ô∏è  –ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫
```

### 8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
```
GET  /compare/                  ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
POST /api/compare/add/          ‚ùå –î–æ–±–∞–≤–∏—Ç—å –∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é
POST /api/compare/remove/       ‚ùå –£–¥–∞–ª–∏—Ç—å –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
```

### 9. –û—Ç–∑—ã–≤—ã
```
GET  /api/reviews/<product_id>/ ‚ùå –û—Ç–∑—ã–≤—ã –æ —Ç–æ–≤–∞—Ä–µ
POST /api/reviews/create/       ‚ùå –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
```

### 10. –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑
```
POST /api/quick-order/          ‚ùå –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑ –≤ 1 –∫–ª–∏–∫
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å URL

### HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã
–í production –≤—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å—Å—è –Ω–∞ HTTPS.

**Nginx –∫–æ–Ω—Ñ–∏–≥:**
```nginx
server {
    listen 80;
    server_name metateks.ru www.metateks.ru;
    return 301 https://www.metateks.ru$request_uri;
}
```

### CSRF Protection
–í—Å–µ POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å—ã –∫ API —Ç—Ä–µ–±—É—é—Ç CSRF —Ç–æ–∫–µ–Ω.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
CSRF_TRUSTED_ORIGINS = [
    'https://metateks.ru',
    'https://www.metateks.ru',
    'https://admin.metateks.ru',
]
```

### Rate Limiting
‚ùå **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: django-ratelimit –∏–ª–∏ nginx limit_req.

---

## üìä SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è URL

### –ß–ü–£ (Clean URLs) ‚úì
–í—Å–µ URL –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–µ slug'–∏:
- ‚úì `/catalog/zapchasti/filtry/` –≤–º–µ—Å—Ç–æ `/catalog/1/2/`
- ‚úì `/brands/xcmg/` –≤–º–µ—Å—Ç–æ `/brands?id=5`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL –¥–ª—è SEO
```
‚úì –ö–æ—Ä–æ—Ç–∫–∏–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ
‚úì –ò—Å–ø–æ–ª—å–∑—É—é—Ç –¥–µ—Ñ–∏—Å—ã –≤–º–µ—Å—Ç–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–π
‚úì –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚úì –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```

### –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ URL
‚ùå **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –î–æ–±–∞–≤–∏—Ç—å canonical links –≤ —à–∞–±–ª–æ–Ω–∞—Ö –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–µ–π.

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env.docker)
```bash
ALLOWED_HOSTS=localhost 127.0.0.1 metateks.vlch.dev metateks-admin.vinodesign.ru
CSRF_TRUSTED_ORIGINS=http://localhost http://127.0.0.1 https://metateks.vlch.dev https://metateks-admin.vinodesign.ru
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω
ALLOWED_HOSTS=metateks.ru www.metateks.ru admin.metateks.ru

# CSRF –∑–∞—â–∏—Ç–∞
CSRF_TRUSTED_ORIGINS=https://metateks.ru https://www.metateks.ru https://admin.metateks.ru

# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç
DEFAULT_SCHEME=https
DEFAULT_SITENAME=www.metateks.ru

# Cookies –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
SESSION_COOKIE_DOMAIN=.metateks.ru
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

**www.metateks.ru (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç):**
```nginx
server {
    listen 443 ssl http2;
    server_name www.metateks.ru metateks.ru;
    
    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
    ssl_certificate /etc/letsencrypt/live/metateks.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/metateks.ru/privkey.pem;
    
    # Proxy –∫ Django
    location / {
        proxy_pass http://web:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

**admin.metateks.ru (–∞–¥–º–∏–Ω–∫–∞):**
```nginx
server {
    listen 443 ssl http2;
    server_name admin.metateks.ru;
    
    # –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ IP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    # allow 192.168.1.0/24;
    # deny all;
    
    location / {
        proxy_pass http://web:8000;
        proxy_set_header Host $host;
    }
}
```

---

## üìù –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

### –¢–µ–∫—É—â–∏–µ URL
- [x] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [x] –ö–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- [x] –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–æ–≤
- [x] –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- [x] –ö–æ—Ä–∑–∏–Ω–∞
- [x] API endpoints
- [x] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°

### –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- [ ] /health/ endpoint
- [ ] /sitemap.xml
- [ ] /robots.txt
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Rate limiting
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –û—Ç–∑—ã–≤—ã –æ —Ç–æ–≤–∞—Ä–∞—Ö

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [x] CSRF –∑–∞—â–∏—Ç–∞
- [x] HTTPS ready (nginx config)
- [ ] Rate limiting
- [ ] IP whitelisting –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ URL

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
```bash
# –ì–ª–∞–≤–Ω–∞—è
curl http://localhost/

# –ö–∞—Ç–∞–ª–æ–≥
curl http://localhost/catalog/

# API
curl -X POST http://localhost/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{"email": "test@test.ru", "password": "password"}'

# –ê–¥–º–∏–Ω–∫–∞
curl http://localhost/admin/login/

# 1–° –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
curl -u "1c_user:password" \
  "http://localhost/cml/1c_exchange.php?type=catalog&mode=checkauth"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
```bash
# –î–æ–ª–∂–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ HTTPS (–≤ production)
curl -I http://metateks.ru/
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- Django URL dispatcher: https://docs.djangoproject.com/en/4.2/topics/http/urls/
- SEO best practices: https://developers.google.com/search/docs/crawling-indexing/url-structure
- Django REST API: https://www.django-rest-framework.org/

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-25  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üé® –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ Media

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (assets)
```
/css/                           ‚úì CSS —Ñ–∞–π–ª—ã
/js/                            ‚úì JavaScript
/fonts/                         ‚úì –®—Ä–∏—Ñ—Ç—ã
/images/                        ‚úì –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫–µ:**
- –ò—Å—Ö–æ–¥–Ω–∏–∫–∏: `./assets/`
- –°–æ–±—Ä–∞–Ω–Ω—ã–µ: `./static/` (–ø–æ—Å–ª–µ collectstatic)

### Media —Ñ–∞–π–ª—ã (–∑–∞–≥—Ä—É–∑–∫–∏)
```
/media/                         ‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
/media/banners/                 ‚úì –ë–∞–Ω–Ω–µ—Ä—ã CMS
/media/news/                    ‚úì –ù–æ–≤–æ—Å—Ç–∏
/media/models/photos_1c/        ‚úì –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ 1–°
/media/cml/                     ‚úì –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã 1–°
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫–µ:** `./media/`

### Nginx –æ—Ç–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`docker/nginx/conf.d/default.conf`):**
```nginx
location /static/ {
    alias /app/static/;
    expires 30d;
}

location /media/ {
    alias /app/media/;
    expires 7d;
}

location ~* ^/(css|js|fonts|images)/ {
    alias /app/assets/;
    expires 30d;
}
```

---

## üîó –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ (CommerceML)
```
URL: http://localhost/cml/1c_exchange.php
Auth: Basic Authentication
User: (—Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ —Å –ø—Ä–∞–≤–∞–º–∏ add_exchange)
```

**–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**
- `?mode=checkauth` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `?mode=init` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–º–µ–Ω–∞
- `?mode=file` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- `?mode=import` - –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

**–¢–∏–ø—ã –æ–±–º–µ–Ω–∞:**
- `?type=catalog` - –æ–±–º–µ–Ω –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤
- `?type=sale` - –æ–±–º–µ–Ω –∑–∞–∫–∞–∑–∞–º–∏

### Webhooks (—Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
```
POST /api/webhooks/payment/     ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
POST /api/webhooks/delivery/    ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏
```

---

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è / PWA

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úì –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ (responsive)
- ‚ùå PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç
- ‚ùå Service Workers
- ‚ùå Offline —Ä–µ–∂–∏–º

### –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è PWA
```
GET /manifest.json              ‚ùå Web App Manifest
GET /service-worker.js          ‚ùå Service Worker
```

---

## üåç –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π (ru-RU)
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å: ‚ùå –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```
/en/                            ‚ùå –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
/ru/                            ‚ùå –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è (—è–≤–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å)
```

Django i18n URL patterns - —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.


---

## üèôÔ∏è –ü–æ–¥–¥–æ–º–µ–Ω—ã –≥–æ—Ä–æ–¥–æ–≤ (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: ‚úÖ –ì–û–¢–û–í–ê –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
- Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: ‚úÖ –ì–û–¢–û–í–ê
- –¢—Ä–µ–±—É–µ—Ç—Å—è: –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏

### –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
metateks.ru                    ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –ø–æ IP ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç
msk.metateks.ru               ‚Üí –ú–æ—Å–∫–≤–∞
spb.metateks.ru               ‚Üí –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥  
ekb.metateks.ru               ‚Üí –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥
nsk.metateks.ru               ‚Üí –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫
admin.metateks.ru             ‚Üí –ê–¥–º–∏–Ω–∫–∞ (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–¥–¥–æ–º–µ–Ω)
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏–º–µ—Ä URL —Ç–æ–≤–∞—Ä–∞:**
```
https://msk.metateks.ru/catalog/zapchasti/filtry/maslyanyj-filtr-12345/
```

**–õ–æ–≥–∏–∫–∞:**
1. Nginx –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `msk.metateks.ru`
2. –ü–µ—Ä–µ–¥–∞–µ—Ç Host header –≤ Django
3. Django middleware –∏–∑–≤–ª–µ–∫–∞–µ—Ç `msk` –∏–∑ –¥–æ–º–µ–Ω–∞
4. –ù–∞—Ö–æ–¥–∏—Ç –≥–æ—Ä–æ–¥: `City.objects.get(slug='msk')`
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `request.city`
6. View —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –ø–æ —Å–∫–ª–∞–¥–∞–º –ú–æ—Å–∫–≤—ã

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

‚úÖ **SEO:** –ö–∞–∂–¥—ã–π –≥–æ—Ä–æ–¥ - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∞–π—Ç –≤ –≥–ª–∞–∑–∞—Ö –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤
‚úÖ **UX:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –≥–æ—Ä–æ–¥ –≤ URL
‚úÖ **–õ–æ–≥–∏–∫–∞:** –†–∞–∑–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏, —Ü–µ–Ω—ã, —É—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥
‚úÖ **–û–¥–∏–Ω Docker:** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**Nginx:**
```nginx
server {
    listen 443 ssl http2;
    server_name metateks.ru *.metateks.ru admin.metateks.ru;
    
    ssl_certificate /etc/letsencrypt/live/metateks.ru/fullchain.pem;  # Wildcard
    
    location / {
        proxy_pass http://django;
        proxy_set_header Host $host;  # –ü–µ—Ä–µ–¥–∞–µ–º –ø–æ–¥–¥–æ–º–µ–Ω –≤ Django
    }
}
```

**Django settings:**
```python
ALLOWED_HOSTS = ['metateks.ru', '*.metateks.ru', 'admin.metateks.ru']
SESSION_COOKIE_DOMAIN = '.metateks.ru'  # –û–±—â–∏–µ —Å–µ—Å—Å–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
CSRF_COOKIE_DOMAIN = '.metateks.ru'
```

**Middleware:**
```python
class CitySubdomainMiddleware:
    def process_request(self, request):
        host = request.get_host()
        if 'msk.metateks.ru':
            request.city = City.objects.get(slug='msk')
```

### DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–£ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞:
```
Type   Name    Value           TTL
A      @       –í–ê–®_IP_–°–ï–†–í–ï–†–ê  3600    # metateks.ru
A      *       –í–ê–®_IP_–°–ï–†–í–ï–†–ê  3600    # *.metateks.ru (–≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã)
A      admin   –í–ê–®_IP_–°–ï–†–í–ï–†–ê  3600    # admin.metateks.ru
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã):
```bash
certbot certonly --manual --preferred-challenges=dns \
  -d metateks.ru -d *.metateks.ru
```

### –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å

‚ùå Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É - —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –æ–¥–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
‚ùå –ö–æ–¥ views - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚ùå API - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚ùå –ê–¥–º–∏–Ω–∫–∞ - –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ admin.metateks.ru

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ë–µ–∑ DNS (—á–µ—Ä–µ–∑ /etc/hosts):**
```bash
# /etc/hosts
127.0.0.1  metateks.local msk.metateks.local spb.metateks.local

# –¢–µ—Å—Ç
curl http://msk.metateks.local/catalog/
```

### –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

1. ‚úÖ –ö—É–ø–∏—Ç—å –¥–æ–º–µ–Ω `metateks.ru`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS (A-–∑–∞–ø–∏—Å–∏ –¥–ª—è wildcard)
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å Wildcard SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å nginx –∫–æ–Ω—Ñ–∏–≥ (3 —Å—Ç—Ä–æ–∫–∏)
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å .env.docker (4 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å middleware (1 —Ñ–∞–π–ª Python)
7. ‚úÖ –î–µ–ø–ª–æ–π: `docker-compose restart web nginx`

**–í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 1-2 —á–∞—Å–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[SUBDOMAINS_SETUP.md](SUBDOMAINS_SETUP.md)** - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **[SUBDOMAINS_CHECKLIST.md](SUBDOMAINS_CHECKLIST.md)** - –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

---

## üéØ –ò—Ç–æ–≥–æ –ø–æ –¥–æ–º–µ–Ω–∞–º

### –¢–µ–∫—É—â–∏–µ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```
localhost:80                   # –ß–µ—Ä–µ–∑ nginx
localhost:8000                 # –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Django
```

### Production (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ)
```
metateks.ru                    # –û—Å–Ω–æ–≤–Ω–æ–π ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø–æ –≥–µ–æ
msk.metateks.ru               # –ú–æ—Å–∫–≤–∞
spb.metateks.ru               # –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
[city].metateks.ru            # –î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞
admin.metateks.ru             # –ê–¥–º–∏–Ω–∫–∞
```

### SSL
```
*.metateks.ru                  # Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë)
```

### Docker
```
‚úÖ –û–¥–∏–Ω nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä       # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ–º–µ–Ω—ã
‚úÖ –û–¥–∏–Ω Django –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä      # –û–¥–∏–Ω –∫–æ–¥, –æ–¥–Ω–∞ –ë–î
‚úÖ –û–¥–∏–Ω PostgreSQL            # –û–±—â–∞—è –±–∞–∑–∞
‚úÖ –û–¥–∏–Ω Redis                 # –û–±—â–∏–π –∫–µ—à/—Å–µ—Å—Å–∏–∏
```

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker –ò–î–ï–ê–õ–¨–ù–û –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è multi-tenant –ø–æ –ø–æ–¥–¥–æ–º–µ–Ω–∞–º!**
