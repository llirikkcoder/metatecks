# –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –≤—ã–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –≤—ã–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å VPS.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. `full_vps_download.sh` - –ü–û–õ–ù–ê–Ø –≤—ã–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö ‚≠ê –ù–û–í–û–ï

–°–∞–º—ã–π –ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç - –≤—ã–≥—Ä—É–∂–∞–µ—Ç –í–°–Å: –ë–î, –º–µ–¥–∏–∞, —Å—Ç–∞—Ç–∏–∫—É, –∫–æ–Ω—Ñ–∏–≥–∏, –ª–æ–≥–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
export VPS_USER="your_username"
export VPS_HOST="your_vps_ip"
export VPS_PATH="/home/mt/metateks-dev"

./scripts/full_vps_download.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ VPS
2. ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã
3. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –¥–∞–º–ø –ë–î (Django dumpdata)
4. ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–º–ø
5. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã
6. ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–∫–∞—á–∞—Ç—å static/, assets/, –∫–æ–Ω—Ñ–∏–≥–∏, –ª–æ–≥–∏
7. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `vps_backup_YYYYMMDD_HHMMSS/` —Å–æ –≤—Å–µ–º
8. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- üéØ –ü–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å VPS
- üéØ –ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
- üéØ –ù–µ —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ
- üéØ –•–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—ë

---

### 2. `migrate_from_vps.sh` - PostgreSQL –º–∏–≥—Ä–∞—Ü–∏—è

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export VPS_USER="your_username"
export VPS_HOST="your_vps_ip"
export VPS_PATH="/home/mt/metateks-dev"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
./scripts/migrate_from_vps.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –¥–∞–º–ø PostgreSQL –Ω–∞ VPS
2. ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–º–ø –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
3. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–º–ø –≤ Docker PostgreSQL
6. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

### 3. `migrate_django_json.sh` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Django

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç Django dumpdata/loaddata –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export VPS_USER="your_username"
export VPS_HOST="your_vps_ip"
export VPS_PATH="/home/mt/metateks-dev"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
./scripts/migrate_django_json.sh
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è SQLite ‚Üí PostgreSQL
- ‚úÖ –ö–æ–≥–¥–∞ –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ PostgreSQL –Ω–∞ VPS
- ‚úÖ –î–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç JSON –¥–∞–º–ø —á–µ—Ä–µ–∑ Django –Ω–∞ VPS
2. ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–º–ø
3. ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É
4. ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Django loaddata
5. ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å

---

### 4. `check_vps_data.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ VPS

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –µ—Å—Ç—å –Ω–∞ VPS –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏.

```bash
export VPS_USER="your_username"
export VPS_HOST="your_vps_ip"
./scripts/check_vps_data.sh
```

---

### 5. `monitor_1c.sh` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 1–° –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–º–µ–Ω–∞ —Å 1–°.

```bash
./scripts/monitor_1c.sh
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –°–ø–æ—Å–æ–± 1: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export VPS_USER="your_username"
export VPS_HOST="192.168.1.100"
export VPS_PATH="/home/mt/metateks-dev"
export DB_NAME="metateks"
export DB_USER="metateks"

./scripts/migrate_from_vps.sh
```

### –°–ø–æ—Å–æ–± 2: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:

```bash
VPS_USER="your_username"
VPS_HOST="192.168.1.100"
VPS_PATH="/home/mt/metateks-dev"
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ù–∞ VPS:
- SSH –¥–æ—Å—Ç—É–ø
- PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è migrate_from_vps.sh)
- Python –∏ Django –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–¥–ª—è migrate_django_json.sh)

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
- Docker –∏ Docker Compose
- SSH –∫–ª–∏–µ–Ω—Ç
- SCP/rsync (–¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤)

---

## –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
export VPS_USER="kipol"
export VPS_HOST="metateks.vlch.dev"
export VPS_PATH="/home/mt/metateks-dev"

# 2. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
cd /mnt/c/_KIPOL/_WORK/_metatecks
./scripts/migrate_from_vps.sh

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
docker-compose ps
curl http://localhost/

# 4. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost/admin/
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å VPS
```

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Permission denied (publickey)"

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å:

```bash
ssh-copy-id $VPS_USER@$VPS_HOST
```

### –û—à–∏–±–∫–∞: "pg_dump: command not found"

–ù–∞ VPS –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `migrate_django_json.sh`.

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–º–ø–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏:

```bash
docker-compose exec db pg_restore \
  -U metateks \
  -d metateks \
  -v -c --clean --if-exists --no-owner --no-acl \
  /tmp/metateks_dump.backup
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –î–∞–º–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –§–∞–π–ª—ã `*.backup`, `*.sql`, `*_dump.json` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`
- –£–¥–∞–ª—è–π—Ç–µ –¥–∞–º–ø—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–º–ø—ã –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–º–ø–æ–≤
rm -f *.backup *.sql *_dump.json
```

---

## –ö–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –°–∏—Ç—É–∞—Ü–∏—è | –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| **–ü–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è, –Ω—É–∂–Ω–æ –≤—Å—ë** | `full_vps_download.sh` | –í—ã–≥—Ä—É–∑–∏—Ç –≤—Å—ë –ø–æ–¥—Ä—è–¥ |
| **–ë—ã—Å—Ç—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è PostgreSQL** | `migrate_from_vps.sh` | PostgreSQL ‚Üí PostgreSQL |
| **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** | `migrate_django_json.sh` | –ß–µ—Ä–µ–∑ Django (–ª—é–±–∞—è –ë–î) |
| **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –Ω–∞ VPS** | `check_vps_data.sh` | –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 1–°** | `monitor_1c.sh` | –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏—Ç–µ —Å `full_vps_download.sh` - –æ–Ω –≤—ã–≥—Ä—É–∑–∏—Ç –≤—Å—ë –∏ —Å–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—ç–∫–∞–ø.

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [VPS_FULL_BACKUP.md](../docs/VPS_FULL_BACKUP.md) - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤—ã–≥—Ä—É–∑–∫–µ
- [VPS_QUICK_DOWNLOAD.md](../docs/VPS_QUICK_DOWNLOAD.md) - –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
- [MIGRATION_FROM_VPS.md](../docs/MIGRATION_FROM_VPS.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
